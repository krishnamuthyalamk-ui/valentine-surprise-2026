<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>For Seraine ‚ù§Ô∏è</title>

<style>
  body{
    margin:0;
    height:100vh;
    overflow:hidden;
    font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    color:white;
    background:
      radial-gradient(circle at 20% 20%, rgba(255,77,136,.45), transparent 60%),
      radial-gradient(circle at 80% 70%, rgba(255,154,194,.30), transparent 60%),
      linear-gradient(135deg,#12001b,#050717);
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
  }

  /* Screen Shake */
  @keyframes shake{
    0%{transform:translate(0)}
    20%{transform:translate(-8px,6px)}
    40%{transform:translate(8px,-6px)}
    60%{transform:translate(-6px,4px)}
    80%{transform:translate(6px,-4px)}
    100%{transform:translate(0)}
  }
  .shake{animation:shake .35s ease}

  /* Cinematic zoom + blur */
  @keyframes zoom{
    0%{transform:scale(1);filter:blur(0) saturate(1)}
    50%{transform:scale(1.05);filter:blur(2px) saturate(1.25)}
    100%{transform:scale(1);filter:blur(0) saturate(1)}
  }
  .insane{animation:zoom .7s cubic-bezier(.2,.9,.2,1)}

  /* Card */
  .card{
    background:rgba(255,255,255,.08);
    padding:30px 22px;
    border-radius:26px;
    backdrop-filter:blur(15px);
    box-shadow:0 30px 90px rgba(0,0,0,.65);
    position:relative;
    border:1px solid rgba(255,255,255,.14);
    width:min(720px, 92vw);
  }

  /* Soft beam glow inside card */
  .card:before{
    content:"";
    position:absolute; inset:-50%;
    background:
      radial-gradient(circle at 35% 35%, rgba(255,77,136,.18), transparent 45%),
      radial-gradient(circle at 70% 60%, rgba(255,154,194,.12), transparent 50%);
    filter:blur(18px);
    transform:rotate(10deg);
    animation: drift 9s ease-in-out infinite;
    z-index:-1;
  }
  @keyframes drift{
    0%,100%{ transform:rotate(10deg) translate(0,0); }
    50%{ transform:rotate(10deg) translate(18px,-14px); }
  }

  /* Title */
  .smallTitle{
    letter-spacing:.25em;
    text-transform:uppercase;
    font-size:12px;
    opacity:.85;
    margin:0 0 10px;
  }

  /* 3D Heart */
  .heartWrap{
    display:grid;
    place-items:center;
    margin:10px 0 6px;
    perspective:900px;
  }
  .heart3d{
    width:70px; height:70px;
    position:relative;
    transform: rotate(45deg) rotateX(12deg) rotateY(-10deg);
    border-radius:18px;
    background: linear-gradient(135deg, rgba(255,77,136,.95), rgba(255,154,194,.75));
    box-shadow:
      0 18px 60px rgba(255,77,136,.28),
      0 0 55px rgba(255,154,194,.18);
    animation: beat 1.15s ease-in-out infinite;
    filter: drop-shadow(0 22px 70px rgba(0,0,0,.35));
  }
  .heart3d:before, .heart3d:after{
    content:"";
    position:absolute;
    width:70px; height:70px;
    background: inherit;
    border-radius:50%;
  }
  .heart3d:before{ left:-35px; top:0; }
  .heart3d:after{ left:0; top:-35px; }

  @keyframes beat{
    0%,100%{ transform: rotate(45deg) rotateX(12deg) rotateY(-10deg) scale(1); }
    50%{ transform: rotate(45deg) rotateX(12deg) rotateY(-10deg) scale(1.16); }
  }

  /* DOUBLE heartbeat after unlock */
  .doubleBeat{
    animation: beatFast .38s ease-in-out infinite !important;
  }
  @keyframes beatFast{
    0%,100%{ transform: rotate(45deg) rotateX(12deg) rotateY(-10deg) scale(1); }
    50%{ transform: rotate(45deg) rotateX(12deg) rotateY(-10deg) scale(1.28); }
  }

  h2{
    margin:8px 0 8px;
    font-size: clamp(30px, 5.5vw, 48px);
    font-weight:1000;
    line-height:1;
    text-shadow:0 18px 55px rgba(0,0,0,.55);
  }

  p{
    margin:8px 0 18px;
    opacity:.92;
    font-size:16px;
    line-height:1.55;
  }

  /* Buttons */
  button{
    padding:12px 26px;
    margin:12px 10px;
    border:none;
    border-radius:999px;
    font-size:18px;
    font-weight:1000;
    cursor:pointer;
    box-shadow:0 14px 35px rgba(0,0,0,.28);
    transition: transform .12s ease, opacity .2s ease, filter .2s ease;
    user-select:none;
    -webkit-tap-highlight-color: transparent;
  }
  button:active{ transform:scale(.98); }

  #yesBtn{
    background:linear-gradient(90deg,#ffb6d3,#ff4d88);
    color:#220013;
    position:relative;
    overflow:hidden;
  }
  #yesBtn:before{
    content:"";
    position:absolute; inset:-40%;
    background: radial-gradient(circle, rgba(255,255,255,.9), transparent 55%);
    transform: translateX(-120%) rotate(20deg);
    opacity:.25;
    animation: shine 2.2s ease-in-out infinite;
  }
  @keyframes shine{
    0%{ transform: translateX(-120%) rotate(20deg); opacity:.08; }
    45%{ opacity:.25; }
    100%{ transform: translateX(120%) rotate(20deg); opacity:.08; }
  }

  .locked{
    opacity:.45;
    cursor:not-allowed;
    box-shadow:none;
    filter: grayscale(.2);
  }
  .locked:before{ display:none; }

  #noBtn{
    background:rgba(255,255,255,.16);
    color:white;
    border:1px solid rgba(255,255,255,.16);
    position:relative;
    backdrop-filter: blur(10px);
  }

  /* Pink blast overlay */
  #blast{
    position:fixed; inset:0;
    background:
      radial-gradient(circle at 50% 45%, rgba(255,77,136,.75), transparent 55%),
      radial-gradient(circle at 30% 30%, rgba(255,154,194,.50), transparent 60%),
      radial-gradient(circle at 70% 70%, rgba(255,200,230,.25), transparent 65%);
    opacity:0;
    pointer-events:none;
    transition:.18s ease;
    z-index:70;
  }
  #blast.show{ opacity:1; }

  /* Toast message */
  .toast{
    position:fixed;
    left:50%;
    bottom:18px;
    transform:translateX(-50%);
    background:rgba(0,0,0,.38);
    border:1px solid rgba(255,255,255,.14);
    padding:10px 14px;
    border-radius:999px;
    font-size:13px;
    opacity:0;
    pointer-events:none;
    z-index:80;
    backdrop-filter: blur(12px);
    transition: opacity .22s ease, transform .22s ease;
    box-shadow: 0 14px 40px rgba(0,0,0,.35);
    white-space:nowrap;
    max-width:92vw;
    overflow:hidden;
    text-overflow:ellipsis;
  }
  .toast.show{
    opacity:1;
    transform:translateX(-50%) translateY(-6px);
  }

  /* Confetti heart */
  .confetti{
    position:fixed;
    top:-20px;
    pointer-events:none;
    z-index:75;
    animation:fall 2.6s linear forwards;
  }
  @keyframes fall{
    0%{ transform:translateY(0) rotate(0deg); opacity:1; }
    100%{ transform:translateY(110vh) rotate(360deg); opacity:0; }
  }

  /* Sparkles layer */
  #sparkLayer{
    position:fixed; inset:0;
    pointer-events:none;
    z-index:78;
  }
  .spark{
    position:absolute;
    width:6px; height:6px;
    border-radius:999px;
    background: radial-gradient(circle, rgba(255,255,255,1), rgba(255,255,255,0));
    filter: drop-shadow(0 0 12px rgba(255,154,194,.65));
    animation: pop .55s ease-out forwards;
  }
  @keyframes pop{
    0%{ transform: translate(0,0) scale(1); opacity:1; }
    100%{ transform: translate(var(--dx), var(--dy)) scale(0.1); opacity:0; }
  }
  .trail{
    position:absolute;
    width:18px; height:18px;
    border-radius:999px;
    background: radial-gradient(circle, rgba(255,77,136,.55), rgba(255,77,136,0));
    filter: blur(0.2px) drop-shadow(0 0 18px rgba(255,77,136,.35));
    animation: fadeTrail .55s ease-out forwards;
  }
  @keyframes fadeTrail{
    0%{ transform: scale(1); opacity:.9; }
    100%{ transform: scale(1.8); opacity:0; }
  }

  /* Fireworks canvas */
  #fx{
    position:fixed; inset:0;
    pointer-events:none;
    z-index:60;
  }

  /* Popup */
  .overlay{
    position:fixed; inset:0;
    display:none;
    place-items:center;
    background:rgba(0,0,0,.72);
    z-index:90;
  }
  .modal{
    width:min(620px, 92vw);
    border-radius:24px;
    background:rgba(255,255,255,.10);
    border:1px solid rgba(255,255,255,.18);
    box-shadow:0 30px 90px rgba(0,0,0,.65);
    backdrop-filter: blur(18px);
    padding:26px 18px;
    position:relative;
    overflow:hidden;
  }
  .modal:before{
    content:"";
    position:absolute; inset:-40%;
    background:
      radial-gradient(circle at 40% 40%, rgba(255,77,136,.25), transparent 45%),
      radial-gradient(circle at 70% 60%, rgba(255,154,194,.18), transparent 50%);
    filter:blur(18px);
    z-index:-1;
  }
  .x{
    position:absolute; top:10px; right:10px;
    width:40px; height:40px;
    border-radius:999px;
    border:0;
    background:rgba(255,255,255,.16);
    color:#fff;
    font-size:18px;
    cursor:pointer;
  }
  .heartBig{
    font-size:72px;
    animation: pulse 1.1s infinite ease-in-out;
    filter: drop-shadow(0 12px 28px rgba(255,100,140,.40));
  }
  @keyframes pulse{
    0%,100%{ transform:scale(1); }
    50%{ transform:scale(1.18); }
  }
  .msg{
    margin:10px 0 6px;
    font-size:20px;
    font-weight:1000;
  }
  .note{
    margin:0 auto;
    max-width:52ch;
    line-height:1.6;
    opacity:.96;
    font-size:16px;
  }
</style>
</head>

<body>
  <div id="blast"></div>
  <canvas id="fx"></canvas>
  <div id="sparkLayer"></div>

  <div class="card">
    <div class="smallTitle">A Special Premiere</div>

    <div class="heartWrap">
      <div class="heart3d" id="mainHeart" aria-hidden="true"></div>
    </div>

    <h2>Seraine ‚ù§Ô∏è</h2>

    <p>Will you be my Valentine? üíñ</p>

    <button id="yesBtn" class="locked" aria-disabled="true">Yes üíó</button>
    <button id="noBtn">No üòè</button>
  </div>

  <div class="toast" id="toast">üòå</div>

  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <button class="x" id="close" aria-label="Close">‚úï</button>
      <div class="heartBig">‚ù§Ô∏è</div>
      <div class="msg">Happy Valentine‚Äôs Day, Seraine ‚ù§Ô∏è</div>
      <p class="note">
        You made the best decision ever choosing me üòå<br/>
        Love, <b>Krishna</b>
      </p>
    </div>
  </div>

  <!-- Your repo music file: Love.mp3 -->
  <audio id="loveSong" src="Love.mp3" preload="auto" loop></audio>

<script>
  /* Toast */
  const toast = document.getElementById("toast");
  let toastTimer=null;
  function showToast(text){
    toast.textContent = text;
    toast.classList.add("show");
    clearTimeout(toastTimer);
    toastTimer = setTimeout(()=>toast.classList.remove("show"), 1300);
  }

  /* Sparkles + trail */
  const sparkLayer = document.getElementById("sparkLayer");
  function sparkleAt(x, y, count=12){
    for(let i=0;i<count;i++){
      const s = document.createElement("div");
      s.className = "spark";
      s.style.left = (x - 3) + "px";
      s.style.top  = (y - 3) + "px";
      s.style.setProperty("--dx", (Math.random()*70 - 35).toFixed(0) + "px");
      s.style.setProperty("--dy", (Math.random()*70 - 35).toFixed(0) + "px");
      sparkLayer.appendChild(s);
      setTimeout(()=>s.remove(), 650);
    }
  }
  function trailAt(x, y){
    const t = document.createElement("div");
    t.className = "trail";
    t.style.left = (x - 9) + "px";
    t.style.top  = (y - 9) + "px";
    sparkLayer.appendChild(t);
    setTimeout(()=>t.remove(), 650);
  }

  /* Confetti hearts */
  function confetti(){
    const emojis=["üíó","üíñ","üíò","üíï","üíù"];
    for(let i=0;i<45;i++){
      const c=document.createElement("div");
      c.className="confetti";
      c.textContent = emojis[Math.floor(Math.random()*emojis.length)];
      c.style.left = Math.random()*100 + "vw";
      c.style.fontSize = (18 + Math.random()*26) + "px";
      c.style.animationDuration = (2.0 + Math.random()*1.2) + "s";
      document.body.appendChild(c);
      setTimeout(()=>c.remove(), 3200);
    }
  }

  /* WebAudio: blip + boom */
  let audioCtx=null;
  function blip(){
    try{
      if(!audioCtx) audioCtx=new(window.AudioContext||window.webkitAudioContext)();
      const o=audioCtx.createOscillator();
      const g=audioCtx.createGain();
      o.type="triangle";
      o.frequency.value = 740 + Math.random()*200;
      g.gain.value = 0.0001;
      o.connect(g); g.connect(audioCtx.destination);

      const now = audioCtx.currentTime;
      g.gain.setValueAtTime(0.0001, now);
      g.gain.exponentialRampToValueAtTime(0.12, now+0.01);
      g.gain.exponentialRampToValueAtTime(0.0001, now+0.09);
      o.start(now);
      o.stop(now+0.10);
    }catch(e){}
  }
  function boom(){
    try{
      if(!audioCtx) audioCtx=new(window.AudioContext||window.webkitAudioContext)();
      const o=audioCtx.createOscillator();
      const g=audioCtx.createGain();
      o.type="sine";
      o.frequency.setValueAtTime(110, audioCtx.currentTime);
      o.frequency.exponentialRampToValueAtTime(55, audioCtx.currentTime + 0.22);

      g.gain.setValueAtTime(0.0001, audioCtx.currentTime);
      g.gain.exponentialRampToValueAtTime(0.22, audioCtx.currentTime + 0.02);
      g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.26);

      o.connect(g); g.connect(audioCtx.destination);
      o.start();
      o.stop(audioCtx.currentTime + 0.28);
    }catch(e){}
  }

  /* Fireworks */
  const canvas = document.getElementById("fx");
  const ctx = canvas.getContext("2d");
  function resize(){ canvas.width=innerWidth; canvas.height=innerHeight; }
  addEventListener("resize", resize); resize();

  let particles=[], running=false;
  function rand(a,b){ return Math.random()*(b-a)+a; }
  function burst(){
    const cx = rand(canvas.width*0.2, canvas.width*0.8);
    const cy = rand(canvas.height*0.12, canvas.height*0.55);
    const count = Math.floor(rand(80, 125));
    for(let i=0;i<count;i++){
      const ang = Math.random()*Math.PI*2;
      const sp  = rand(2.6, 7.2);
      particles.push({
        x:cx, y:cy,
        vx:Math.cos(ang)*sp,
        vy:Math.sin(ang)*sp,
        life:rand(55, 100),
        age:0,
        hue:Math.floor(rand(0,360)),
        size:rand(1.2,3.2)
      });
    }
  }
  function tick(){
    if(!running) return;
    ctx.clearRect(0,0,canvas.width,canvas.height);
    for(let i=particles.length-1;i>=0;i--){
      const p=particles[i];
      p.age++;
      p.vy += 0.035;
      p.vx *= 0.99; p.vy *= 0.99;
      p.x += p.vx; p.y += p.vy;

      const a = Math.max(0, 1 - (p.age/p.life));
      ctx.beginPath();
      ctx.fillStyle = `hsla(${p.hue}, 95%, 68%, ${a})`;
      ctx.arc(p.x,p.y,p.size,0,Math.PI*2);
      ctx.fill();

      if(p.age>=p.life) particles.splice(i,1);
    }
    requestAnimationFrame(tick);
  }
  function startFireworks(ms){
    if(!running){ running=true; tick(); }
    const inter=setInterval(burst, 340);
    burst(); burst();
    setTimeout(()=>{
      clearInterval(inter);
      setTimeout(()=>{
        particles=[];
        ctx.clearRect(0,0,canvas.width,canvas.height);
        running=false;
      }, 1300);
    }, ms);
  }

  /* Main logic: YES locked until 4 NO taps */
  const REQUIRED_NO = 4;
  let noCount=0;
  let unlocked=false;

  const yesBtn = document.getElementById("yesBtn");
  const noBtn = document.getElementById("noBtn");
  const blast = document.getElementById("blast");
  const heart = document.getElementById("mainHeart");
  const overlay = document.getElementById("overlay");
  const song = document.getElementById("loveSong");

  const noLines = ["üòè not that one", "üôà come onnn‚Ä¶", "üíó your heart is lying", "‚ú® try again", "üòá be honest, babe", "üòå nice try"];

  function insaneMoment(){
    // shake + zoom
    document.body.classList.add("shake");
    document.body.classList.add("insane");
    setTimeout(()=>document.body.classList.remove("shake"), 360);
    setTimeout(()=>document.body.classList.remove("insane"), 760);

    // pink blast
    blast.classList.add("show");
    setTimeout(()=>blast.classList.remove("show"), 220);

    // vibration
    try{ if(navigator.vibrate) navigator.vibrate([60,40,60,40,120]); }catch(e){}
  }

  function unlock(){
    unlocked=true;

    insaneMoment();
    boom();

    // massive sparkles
    sparkleAt(innerWidth/2, innerHeight/2, 40);
    sparkleAt(innerWidth*0.15, innerHeight*0.25, 18);
    sparkleAt(innerWidth*0.85, innerHeight*0.28, 18);
    sparkleAt(innerWidth*0.25, innerHeight*0.78, 16);
    sparkleAt(innerWidth*0.75, innerHeight*0.80, 16);

    confetti();
    startFireworks(1800);

    // DOUBLE heartbeat
    heart.classList.add("doubleBeat");
    setTimeout(()=>heart.classList.remove("doubleBeat"), 2200);

    // unlock YES
    yesBtn.classList.remove("locked");
    yesBtn.setAttribute("aria-disabled","false");

    showToast("üíó okay‚Ä¶ now tap YES üòå");

    const r = yesBtn.getBoundingClientRect();
    sparkleAt(r.left + r.width/2, r.top + r.height/2, 26);
  }

  function moveNo(){
    blip();

    const rect = noBtn.getBoundingClientRect();
    const btnW = rect.width;
    const btnH = rect.height;

    const pad = 16;
    const maxX = Math.max(pad, window.innerWidth  - btnW - pad);
    const maxY = Math.max(pad, window.innerHeight - btnH - pad);

    const x = Math.floor(pad + Math.random() * (maxX - pad));
    const y = Math.floor(pad + Math.random() * (maxY - pad));

    noBtn.style.position="fixed";
    noBtn.style.left = x + "px";
    noBtn.style.top  = y + "px";

    const cx = x + btnW/2;
    const cy = y + btnH/2;
    trailAt(cx, cy);
    sparkleAt(cx, cy, 10);

    noCount++;
    showToast(noLines[Math.floor(Math.random()*noLines.length)]);

    if(!unlocked && noCount >= REQUIRED_NO){
      unlock();
    }
  }

  // No button always playful
  noBtn.addEventListener("click",(e)=>{ e.preventDefault(); moveNo(); });
  noBtn.addEventListener("touchstart",(e)=>{ e.preventDefault(); moveNo(); }, {passive:false});
  noBtn.addEventListener("mouseover",()=>{ moveNo(); });

  // Yes only after unlock
  yesBtn.addEventListener("click",()=>{
    if(!unlocked){
      showToast("üòå not yet‚Ä¶");
      return;
    }
    overlay.style.display="grid";
    overlay.setAttribute("aria-hidden","false");

    song.currentTime=0;
    song.play().catch(()=>{});

    startFireworks(4200);
    showToast("‚ù§Ô∏è good choice üòå");
  });

  // Close popup
  document.getElementById("close").addEventListener("click", closePopup);
  overlay.addEventListener("click", (e)=>{ if(e.target===overlay) closePopup(); });
  function closePopup(){
    overlay.style.display="none";
    overlay.setAttribute("aria-hidden","true");
  }
</script>
</body>
</html>
